<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Base 10 Blocks Tool</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; }
  h2 { margin:10px; }
  #controls { margin:10px; display:flex; flex-wrap:wrap; justify-content:center; gap:10px; }
  button, input { font-size:14px; padding:5px; }
  #topPiles { display:flex; justify-content:center; gap:50px; margin-top:10px; height:250px; }
  .pile { width:100px; height:250px; position:relative; display:flex; flex-direction:column-reverse; align-items:center; justify-content:flex-start; }
  #board { width:90vw; height:60vh; border:1px solid #333; margin-top:20px; position:relative; overflow:hidden; background:#f0f0f0; }
  .block { position:absolute; cursor:grab; display:flex; justify-content:center; align-items:center; user-select:none; touch-action:none; transition:transform 0.1s; }
  
  /* Realistic proportions */
 .unit { width:30px; height:30px; transform-style:preserve-3d; }
.rod { width:12px; height:120px; transform-style:preserve-3d; }
.flat { width:120px; height:120px; transform-style:preserve-3d; } /* corrected: now a square */
.cube { width:120px; height:120px; transform-style:preserve-3d; }

  
  /* 3D shading */
  .block::before {
    content:'';
    position:absolute; top:0; left:0; width:100%; height:100%;
    box-shadow: inset -5px -5px 10px rgba(0,0,0,0.3);
    border:1px solid #555;
    border-radius:3px;
  }
</style>
</head>
<body>

<h2>Interactive Base 10 Blocks</h2>

<div id="controls">
  <label>Unit Color: <input type="color" id="colorUnit" value="#ff0000"></label>
  <label>Rod Color: <input type="color" id="colorRod" value="#00b0f0"></label>
  <label>Flat Color: <input type="color" id="colorFlat" value="#ffff00"></label>
  <label>Cube Color: <input type="color" id="colorCube" value="#92d050"></label>
  <button id="addUnit">Add Unit</button>
  <button id="addRod">Add Rod</button>
  <button id="addFlat">Add Flat</button>
  <button id="addCube">Add Cube</button>
  <button id="reset">Reset</button>
</div>

<div id="topPiles">
  <div id="pileUnit" class="pile"></div>
  <div id="pileRod" class="pile"></div>
  <div id="pileFlat" class="pile"></div>
  <div id="pileCube" class="pile"></div>
</div>

<div id="board"></div>

<script>
const board = document.getElementById('board');
const piles = {
  unit: document.getElementById('pileUnit'),
  rod: document.getElementById('pileRod'),
  flat: document.getElementById('pileFlat'),
  cube: document.getElementById('pileCube')
};
const counters = {unit:[], rod:[], flat:[], cube:[]};

// --- Create a block ---
function createBlock(type){
  let block = document.createElement('div');
  block.classList.add('block', type);
  block.dataset.type = type;
  block.style.background = document.getElementById('color'+capitalize(type)).value;
  block.style.left = '0px';
  block.style.bottom = '0px';
  makeDraggable(block);
  piles[type].appendChild(block);
  counters[type].push(block);
}

// --- Capitalize helper ---
function capitalize(str){ return str.charAt(0).toUpperCase()+str.slice(1); }

// --- Make draggable ---
function makeDraggable(block){
  block.addEventListener('mousedown', startDrag);
  block.addEventListener('touchstart', startDrag);
}

function startDrag(e){
  e.preventDefault();
  const block = e.target;
  let offsetX, offsetY;
  if(e.touches){
    offsetX = e.touches[0].clientX - block.getBoundingClientRect().left;
    offsetY = e.touches[0].clientY - block.getBoundingClientRect().top;
  } else {
    offsetX = e.clientX - block.getBoundingClientRect().left;
    offsetY = e.clientY - block.getBoundingClientRect().top;
  }
  block.style.position='absolute';
  block.style.zIndex='1000';
  document.body.appendChild(block);

  function move(e){
    let clientX = e.touches?e.touches[0].clientX:e.clientX;
    let clientY = e.touches?e.touches[0].clientY:e.clientY;
    block.style.left = (clientX - offsetX) + 'px';
    block.style.top = (clientY - offsetY) + 'px';
  }
  function up(){
    document.removeEventListener('mousemove',move);
    document.removeEventListener('mouseup',up);
    document.removeEventListener('touchmove',move);
    document.removeEventListener('touchend',up);
    // Keep block in board
    let rect = board.getBoundingClientRect();
    let bRect = block.getBoundingClientRect();
    if(bRect.right>rect.right) block.style.left = rect.right - bRect.width + 'px';
    if(bRect.left<rect.left) block.style.left = rect.left + 'px';
    if(bRect.top<rect.top) block.style.top = rect.top + 'px';
    if(bRect.bottom>rect.bottom) block.style.top = rect.bottom - bRect.height + 'px';
  }
  document.addEventListener('mousemove',move);
  document.addEventListener('mouseup',up);
  document.addEventListener('touchmove',move);
  document.addEventListener('touchend',up);
}

// --- Add blocks ---
document.getElementById('addUnit').addEventListener('click',()=>createBlock('unit'));
document.getElementById('addRod').addEventListener('click',()=>createBlock('rod'));
document.getElementById('addFlat').addEventListener('click',()=>createBlock('flat'));
document.getElementById('addCube').addEventListener('click',()=>createBlock('cube'));

// --- Reset ---
document.getElementById('reset').addEventListener('click',()=>{
  for(let type in counters){
    counters[type].forEach(b=>b.remove());
    counters[type]=[];
  }
  for(let type in piles){
    let startCount = type==='unit'?50:type==='rod'?20:type==='flat'?10:5;
    for(let i=0;i<startCount;i++) createBlock(type);
  }
});

// --- Initialize ---
document.getElementById('reset').click();
</script>

</body>
</html>

